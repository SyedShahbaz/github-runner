name: .NET Tests on Self-Hosted Runner in Docker

on:
  push:
    branches: [ main ]
  pull_request:

jobs:
  build:
    # Use your self-hosted runner (make sure your runner is online)
    runs-on: self-hosted

    # Run the job inside a Docker container using the .NET 6.0 SDK image
    container:
      image: mcr.microsoft.com/dotnet/sdk:6.0

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Restore dependencies
        run: dotnet restore

      - name: Build solution
        run: dotnet build --no-restore

      - name: Run unit tests
        run: dotnet test --no-build --verbosity normal
